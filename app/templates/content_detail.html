<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Review Content - {{ content.topic }}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
</head>
<body class="bg-gray-50">
    <div class="min-h-screen">
        <!-- Header -->
        <nav class="bg-white shadow-sm">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between h-16">
                    <div class="flex items-center">
                        <h1 class="text-xl font-bold text-gray-900">Social Automation</h1>
                        <span class="ml-4 text-sm text-gray-500">Review Content</span>
                    </div>
                    <div class="flex items-center space-x-4">
                        <a href="/admin/dashboard" class="text-gray-600 hover:text-gray-900">Dashboard</a>
                        <a href="/admin/clients" class="text-gray-600 hover:text-gray-900">Clients</a>
                        <a href="/admin/logout" class="text-gray-600 hover:text-gray-900">Logout</a>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <div class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8">
            <!-- Back Button -->
            <div class="mb-4">
                <a href="/admin/dashboard" class="inline-flex items-center text-sm text-gray-600 hover:text-gray-900">
                    <svg class="h-4 w-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                    </svg>
                    Back to Dashboard
                </a>
            </div>

            <!-- Success/Error Messages -->
            <div id="message-container"></div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- Main Content Panel -->
                <div class="lg:col-span-2 space-y-6">
                    <!-- Content Info Card -->
                    <div class="bg-white shadow rounded-lg p-6">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h2 class="text-2xl font-bold text-gray-900">{{ content.topic }}</h2>
                                <p class="text-sm text-gray-500 mt-1">
                                    {{ client.business_name }} • {{ content.focus_location }}
                                </p>
                            </div>
                            <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium
                                {% if content.status == 'pending_approval' %}bg-yellow-100 text-yellow-800
                                {% elif content.status == 'approved' %}bg-green-100 text-green-800
                                {% elif content.status == 'scheduled' %}bg-blue-100 text-blue-800
                                {% elif content.status == 'published' %}bg-purple-100 text-purple-800
                                {% elif content.status == 'failed' %}bg-red-100 text-red-800
                                {% else %}bg-gray-100 text-gray-800{% endif %}">
                                {{ content.status.replace('_', ' ').title() }}
                            </span>
                        </div>

                        <div class="grid grid-cols-2 gap-4 text-sm">
                            <div>
                                <span class="text-gray-500">Content Type:</span>
                                <span class="ml-2 font-medium">{{ content.content_type.replace('_', ' ').title() }}</span>
                            </div>
                            <div>
                                <span class="text-gray-500">Created:</span>
                                <span class="ml-2 font-medium">{{ content.created_at.strftime('%b %d, %Y %I:%M %p') }}</span>
                            </div>
                        </div>

                        {% if content.notes %}
                        <div class="mt-4 p-3 bg-blue-50 rounded border border-blue-200">
                            <p class="text-sm text-blue-900"><strong>Notes:</strong> {{ content.notes }}</p>
                        </div>
                        {% endif %}
                    </div>

                    <!-- Caption Editor -->
                    <div class="bg-white shadow rounded-lg p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Caption</h3>
                        <form id="caption-form" class="space-y-4">
                            <textarea id="caption" name="caption" rows="6"
                                class="w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                                placeholder="Caption will be generated by AI...">{{ content.caption or '' }}</textarea>

                            <button type="submit"
                                class="inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none">
                                <svg class="h-4 w-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                                </svg>
                                Save Caption
                            </button>
                        </form>
                    </div>

                    <!-- Hashtags & CTA -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Hashtags -->
                        <div class="bg-white shadow rounded-lg p-6">
                            <h3 class="text-lg font-semibold text-gray-900 mb-3">Hashtags</h3>
                            <div class="flex flex-wrap gap-2">
                                {% if content.hashtags %}
                                    {% for tag in content.hashtags %}
                                    <span class="inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800">
                                        #{{ tag }}
                                    </span>
                                    {% endfor %}
                                {% else %}
                                    <p class="text-sm text-gray-500">No hashtags generated yet</p>
                                {% endif %}
                            </div>
                        </div>

                        <!-- CTA -->
                        <div class="bg-white shadow rounded-lg p-6">
                            <h3 class="text-lg font-semibold text-gray-900 mb-3">Call to Action</h3>
                            <p class="text-sm text-gray-700">{{ content.cta or 'No CTA generated yet' }}</p>
                        </div>
                    </div>

                    <!-- Platform Variations -->
                    {% if content.platform_captions %}
                    <div class="bg-white shadow rounded-lg p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Platform-Specific Variations</h3>
                        <div class="space-y-4">
                            {% for platform, caption in content.platform_captions.items() %}
                            <div class="border border-gray-200 rounded-lg p-4">
                                <div class="flex items-center mb-2">
                                    {% if platform == 'facebook' %}
                                    <svg class="h-5 w-5 text-blue-600 mr-2" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                                    </svg>
                                    <span class="font-medium text-gray-900">Facebook</span>
                                    {% elif platform == 'instagram' %}
                                    <svg class="h-5 w-5 text-pink-600 mr-2" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.788.717 1.459 1.384 2.126.667.666 1.336 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.788-.306 1.459-.718 2.126-1.384.666-.667 1.079-1.335 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.149-.558-2.913-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227-.224.562-.479.96-.899 1.382-.419.419-.824.679-1.38.896-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421-.569-.224-.96-.479-1.379-.899-.421-.419-.69-.824-.9-1.38-.165-.42-.359-1.065-.42-2.235-.045-1.26-.061-1.649-.061-4.844 0-3.196.016-3.586.061-4.861.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.42-.166 1.051-.361 2.221-.421 1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678c-3.405 0-6.162 2.76-6.162 6.162 0 3.405 2.76 6.162 6.162 6.162 3.405 0 6.162-2.76 6.162-6.162 0-3.405-2.76-6.162-6.162-6.162zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm7.846-10.405c0 .795-.646 1.44-1.44 1.44-.795 0-1.44-.646-1.44-1.44 0-.794.646-1.439 1.44-1.439.793-.001 1.44.645 1.44 1.439z"/>
                                    </svg>
                                    <span class="font-medium text-gray-900">Instagram</span>
                                    {% elif platform == 'linkedin' %}
                                    <svg class="h-5 w-5 text-blue-700 mr-2" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                                    </svg>
                                    <span class="font-medium text-gray-900">LinkedIn</span>
                                    {% elif platform == 'google_business' %}
                                    <svg class="h-5 w-5 text-red-600 mr-2" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"/>
                                    </svg>
                                    <span class="font-medium text-gray-900">Google Business</span>
                                    {% endif %}
                                </div>
                                <p class="text-sm text-gray-700">{{ caption }}</p>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %}

                    <!-- AI Image Generation -->
                    <div class="bg-white shadow rounded-lg p-6">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold text-gray-900">AI Image Generation</h3>
                            {% if content.caption %}
                            <button
                                onclick="document.getElementById('image-gen-form').classList.toggle('hidden')"
                                class="inline-flex items-center px-3 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-purple-600 hover:bg-purple-700">
                                <svg class="h-4 w-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                                </svg>
                                Generate AI Image
                            </button>
                            {% endif %}
                        </div>

                        {% if not content.caption %}
                        <div class="text-center py-4 bg-gray-50 rounded-lg">
                            <p class="text-sm text-gray-500">Generate a caption first to create AI images</p>
                        </div>
                        {% else %}
                        <form id="image-gen-form" class="hidden space-y-4"
                              hx-post="/admin/content/{{ content.id }}/generate-image"
                              hx-target="#image-result"
                              hx-swap="innerHTML">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Image Style</label>
                                <select name="style" class="block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500">
                                    <option value="photographic">Photographic (Realistic)</option>
                                    <option value="digital art">Digital Art</option>
                                    <option value="minimalist">Minimalist</option>
                                    <option value="professional">Professional/Corporate</option>
                                </select>
                            </div>

                            <button type="submit"
                                class="w-full inline-flex justify-center items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-purple-600 hover:bg-purple-700">
                                <svg class="h-4 w-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                                </svg>
                                Generate Image with DALL-E
                            </button>
                        </form>

                        <div id="image-result" class="mt-4">
                            <!-- Generated images will appear here -->
                        </div>
                        {% endif %}
                    </div>

                    <!-- Media Attachments -->
                    {% if content.media_urls %}
                    <div class="bg-white shadow rounded-lg p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Media Attachments</h3>
                        <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                            {% for url in content.media_urls %}
                            <div class="relative">
                                <img src="{{ url }}" alt="Media" class="w-full h-32 object-cover rounded-lg">
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %}

                    <!-- Blog Post Section -->
                    <div class="bg-white shadow rounded-lg p-6">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold text-gray-900">Blog Post</h3>
                            {% if not content.blog_title %}
                            <button
                                hx-post="/admin/content/{{ content.id }}/generate-blog"
                                hx-target="#message-container"
                                hx-swap="innerHTML"
                                class="inline-flex items-center px-3 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-purple-600 hover:bg-purple-700 focus:outline-none">
                                <svg class="h-4 w-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
                                </svg>
                                Generate Blog Post
                            </button>
                            {% endif %}
                        </div>

                        {% if content.blog_title %}
                        <!-- Blog Preview -->
                        <div class="border border-gray-200 rounded-lg p-4 space-y-4">
                            <div>
                                <h4 class="text-xl font-bold text-gray-900 mb-2">{{ content.blog_title }}</h4>
                                <div class="flex items-center space-x-4 text-sm text-gray-500">
                                    <span>SEO Title: {{ content.blog_meta_title }}</span>
                                </div>
                                <p class="mt-2 text-sm text-gray-600 italic">{{ content.blog_meta_description }}</p>
                            </div>

                            <div class="prose prose-sm max-w-none">
                                {{ content.blog_content[:500] }}...
                                {% if content.blog_content|length > 500 %}
                                <button onclick="showFullBlog()" class="text-indigo-600 hover:text-indigo-700 text-sm font-medium">
                                    Read full blog post →
                                </button>
                                {% endif %}
                            </div>

                            {% if content.blog_url %}
                            <div class="bg-green-50 border border-green-200 rounded p-3">
                                <p class="text-sm text-green-800">
                                    ✅ Published to WordPress:
                                    <a href="{{ content.blog_url }}" target="_blank" class="font-medium underline">
                                        View on site
                                    </a>
                                </p>
                            </div>
                            {% else %}
                            <div class="flex space-x-2">
                                <button
                                    hx-post="/admin/content/{{ content.id }}/publish-blog"
                                    hx-target="#message-container"
                                    hx-swap="innerHTML"
                                    class="inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none">
                                    <svg class="h-4 w-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                                    </svg>
                                    Publish to WordPress
                                </button>
                                <button
                                    hx-post="/admin/content/{{ content.id }}/generate-blog"
                                    hx-target="#message-container"
                                    hx-swap="innerHTML"
                                    hx-confirm="Re-generate blog post? This will replace the current content."
                                    class="inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none">
                                    <svg class="h-4 w-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                                    </svg>
                                    Regenerate
                                </button>
                            </div>
                            {% endif %}
                        </div>
                        {% else %}
                        <div class="text-center py-8 text-gray-500">
                            <svg class="mx-auto h-12 w-12 text-gray-400 mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                            </svg>
                            <p class="text-sm">No blog post generated yet</p>
                            <p class="text-xs mt-1">Click "Generate Blog Post" to create SEO-optimized blog content from this social post</p>
                        </div>
                        {% endif %}
                    </div>
                </div>

                <!-- Actions Sidebar -->
                <div class="lg:col-span-1">
                    <div class="bg-white shadow rounded-lg p-6 space-y-4">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Actions</h3>

                        {% if content.status == 'pending_approval' %}
                        <!-- Approve Button -->
                        <button
                            hx-post="/admin/content/{{ content.id }}/approve"
                            hx-target="#message-container"
                            hx-swap="innerHTML"
                            class="w-full flex justify-center items-center px-4 py-3 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none">
                            <svg class="h-5 w-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                            </svg>
                            Approve Content
                        </button>

                        <!-- Reject Button -->
                        <button
                            hx-post="/admin/content/{{ content.id }}/reject"
                            hx-confirm="Are you sure you want to reject this content?"
                            hx-target="#message-container"
                            hx-swap="innerHTML"
                            class="w-full flex justify-center items-center px-4 py-3 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none">
                            <svg class="h-5 w-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                            </svg>
                            Reject
                        </button>
                        {% endif %}

                        {% if content.status == 'approved' or content.status == 'scheduled' %}
                        <!-- Schedule Form -->
                        <form id="schedule-form" class="space-y-3">
                            <label class="block text-sm font-medium text-gray-700">Schedule Post</label>
                            <input type="datetime-local" name="scheduled_at" id="scheduled_at"
                                value="{{ content.scheduled_at.strftime('%Y-%m-%dT%H:%M') if content.scheduled_at else '' }}"
                                class="w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">

                            <button type="submit"
                                class="w-full flex justify-center items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none">
                                <svg class="h-5 w-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                                </svg>
                                Update Schedule
                            </button>
                        </form>

                        <div class="border-t border-gray-200 pt-4">
                            <button
                                hx-post="/admin/content/{{ content.id }}/publish-now"
                                hx-confirm="Publish this content immediately?"
                                hx-target="#message-container"
                                hx-swap="innerHTML"
                                class="w-full flex justify-center items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-purple-600 hover:bg-purple-700 focus:outline-none">
                                <svg class="h-5 w-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                                </svg>
                                Publish Now
                            </button>
                        </div>
                        {% endif %}

                        <!-- Platforms Info -->
                        <div class="border-t border-gray-200 pt-4">
                            <h4 class="text-sm font-medium text-gray-900 mb-2">Platforms</h4>
                            <div class="flex flex-wrap gap-2">
                                {% for platform in content.platforms %}
                                <span class="inline-flex items-center px-2 py-1 rounded text-xs bg-gray-100 text-gray-800">
                                    {{ platform.replace('_', ' ').title() }}
                                </span>
                                {% endfor %}
                            </div>
                        </div>

                        <!-- AI Model Info -->
                        {% if content.ai_model_used %}
                        <div class="border-t border-gray-200 pt-4">
                            <p class="text-xs text-gray-500">
                                Generated by {{ content.ai_model_used }}
                            </p>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Caption editing
        document.getElementById('caption-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            const caption = document.getElementById('caption').value;

            try {
                const response = await fetch('/admin/content/{{ content.id }}/edit', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({caption: caption})
                });

                const messageContainer = document.getElementById('message-container');
                if (response.ok) {
                    messageContainer.innerHTML = `
                        <div class="mb-4 bg-green-50 border border-green-200 rounded-lg p-4">
                            <p class="text-sm text-green-800">Caption updated successfully!</p>
                        </div>
                    `;
                } else {
                    messageContainer.innerHTML = `
                        <div class="mb-4 bg-red-50 border border-red-200 rounded-lg p-4">
                            <p class="text-sm text-red-800">Failed to update caption.</p>
                        </div>
                    `;
                }

                // Clear message after 3 seconds
                setTimeout(() => {
                    messageContainer.innerHTML = '';
                }, 3000);
            } catch (error) {
                console.error('Error:', error);
            }
        });

        // Schedule form
        document.getElementById('schedule-form')?.addEventListener('submit', async function(e) {
            e.preventDefault();
            const scheduledAt = document.getElementById('scheduled_at').value;

            try {
                const response = await fetch('/admin/content/{{ content.id }}/schedule', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({scheduled_at: scheduledAt})
                });

                const messageContainer = document.getElementById('message-container');
                if (response.ok) {
                    messageContainer.innerHTML = `
                        <div class="mb-4 bg-green-50 border border-green-200 rounded-lg p-4">
                            <p class="text-sm text-green-800">Content scheduled successfully!</p>
                        </div>
                    `;
                } else {
                    messageContainer.innerHTML = `
                        <div class="mb-4 bg-red-50 border border-red-200 rounded-lg p-4">
                            <p class="text-sm text-red-800">Failed to schedule content.</p>
                        </div>
                    `;
                }

                // Clear message after 3 seconds
                setTimeout(() => {
                    messageContainer.innerHTML = '';
                }, 3000);
            } catch (error) {
                console.error('Error:', error);
            }
        });
    </script>
</body>
</html>
